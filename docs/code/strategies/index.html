<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/twmdocs/blog/rss.xml" title="TWM Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/twmdocs/blog/atom.xml" title="TWM Blog Atom Feed"><title data-react-helmet="true">Strategies | TWM</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://yzninjacoding.github.io/twmdocs/docs/code/strategies"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Strategies | TWM"><meta data-react-helmet="true" name="description" content="Initialization"><meta data-react-helmet="true" property="og:description" content="Initialization"><link data-react-helmet="true" rel="shortcut icon" href="/twmdocs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://yzninjacoding.github.io/twmdocs/docs/code/strategies"><link data-react-helmet="true" rel="alternate" href="https://yzninjacoding.github.io/twmdocs/docs/code/strategies" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yzninjacoding.github.io/twmdocs/docs/code/strategies" hreflang="x-default"><link rel="stylesheet" href="/twmdocs/assets/css/styles.a25e30c6.css">
<link rel="preload" href="/twmdocs/assets/js/runtime~main.1b3b928b.js" as="script">
<link rel="preload" href="/twmdocs/assets/js/main.f35465c1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_ARwE">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/twmdocs/"><img src="/twmdocs/img/logo.svg" alt="TWM Logo" class="themedImage_BKHl themedImage--light_k5J3 navbar__logo"><img src="/twmdocs/img/logo.svg" alt="TWM Logo" class="themedImage_BKHl themedImage--dark_yA+l navbar__logo"><b class="navbar__title">TWM</b></a><a class="navbar__item navbar__link navbar__link--active" href="/twmdocs/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://twm.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Download<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_6ILz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_7-MD react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_cA0-">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_cA0-">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_xm8d"><button class="clean-btn backToTopButton_pefn" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_qc+d"><div class="sidebar_j5EG"><nav class="menu thin-scrollbar menu_5h4S menuWithAnnouncementBar_4sxA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/twmdocs/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Platform</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Code</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/twmdocs/docs/code/core">Core</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/twmdocs/docs/code/indicators">Indicators</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/twmdocs/docs/code/strategies">Strategies</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/twmdocs/docs/code/misc">Miscellaneous</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_eoSP"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_e3oB"><div class="docItemContainer_6UNJ"><article><div class="tocCollapsible_MxYT theme-doc-toc-mobile tocMobile_lj85"><button type="button" class="clean-btn tocCollapsibleButton_Pq3d">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Strategies</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="initialization"></a>Initialization<a class="hash-link" href="#initialization" title="Direct link to heading">#</a></h3><p>Each strategy has to be created with a <strong>unique GUID</strong>. Inside Visual Studio you can go to <code>Tools -&gt; Create GUID</code> to generate a unique GUID for your strategy.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> string </span><span class="token maybe-class-name">SystemVersion</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; V1.0&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> string </span><span class="token maybe-class-name">StrategyName</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MA Crossover&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> string </span><span class="token maybe-class-name">StrategyGuid</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;C8BFB4D3-2C74-469F-8A25-397BFE3DD574&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> override </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">OnStateChanged</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">State</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token maybe-class-name">State</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">SetDefaults</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">StrategyName</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token maybe-class-name">SystemVersion</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Guid</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Guid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">StrategyGuid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Version</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">SystemVersion</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="orders"></a>Orders<a class="hash-link" href="#orders" title="Direct link to heading">#</a></h3><p>To analyze potential fills during historical execution for <code>stop-market</code>, <code>limit</code>, and <code>stop-limit</code> orders TWM uses an internal BeforeBarUpdate event. The OnBarUpdate event occurs after the BeforeBarUpdate for the same bar index.</p><p><code>OrderAction.Buy</code> - will open a long position, should be used on initial position opening and scaling in</p><p><code>OrderAction.Sell</code> - will close a long position, , should be used for closing the position or scaling out</p><p><code>OrderAction.SellShort</code> - will open a short position, should be used on initial position opening and scaling in</p><p><code>OrderAction.BuyToCover</code> - will close a short position, should be used for closing the position or scaling out</p><p>For live market <code>OrderAction.Buy</code> and <code>OrderAction.BuyToCover</code> will always buy and <code>OrderAction.SellShort</code> and <code>OrderAction.BuyToCover</code> will always sell.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="market-orders"></a>Market Orders<a class="hash-link" href="#market-orders" title="Direct link to heading">#</a></h3><p>Submitted market orders will get filled immidiatly. During historical execution TWM will use the next bar open value to fill the order.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">PlaceMarketEntryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">bool isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _entryOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SubmitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderAction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Buy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Market</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PosSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">EnterLongName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _entryOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SubmitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderAction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">SellShort</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Market</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PosSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">EnterShortName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="limit-orders"></a>Limit Orders<a class="hash-link" href="#limit-orders" title="Direct link to heading">#</a></h3><p>For limit orders the following Ois true during historical execution.</p><ul><li><p>If there is NO position and order action is <code>Buy</code> and low of the upcoming bar is equal or below the set price OR order action is <code>SellShort</code> and high of the upcoming bar is equal or higher to the set limit price you will get a fill with the set limit price, your order state will be marked as filled, a new position will be created and a <code>OnOrderUpdate</code> event will occur. In case if there was a gap you will get a fill using the rule <code>at price or better</code> which will use the bar open.</p></li><li><p>In case stop and profit orders have been set during the <code>OnOrderUpdate</code> the StrategyBase class will perform a check for stop and limit orders fills within the same bar.</p></li></ul><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">PlaceLimitEntryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">bool isLong</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> double price</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _entryOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SubmitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderAction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Buy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Limit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PosSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">EnterLongName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _entryOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SubmitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderAction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">SellShort</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Limit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PosSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">EnterShortName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><img src="/twmdocs/assets/images/limitEntryExample-ac039f3e3eaffe4955eef11c51481bdb.png" alt="Data Series Window" style="width:700px"><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B"><pre tabindex="0" class="prism-code language-undefined codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token plain"> PlaceLimitEntryOrder(false,  Low[0] - TickSize*50);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><p>The above example clearly demonstrates where the historical order short fill has been filled with bar open price although its limit order price has been set 50 ticks below the signal bar low.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="stop-market-orders"></a>Stop-Market Orders<a class="hash-link" href="#stop-market-orders" title="Direct link to heading">#</a></h3><p>To understand stop market orders we need to understand the concept of trigger price. Basicaly a stop market order will execute a market order when the market gets to a trigger price. It does not matter where the market is at the moment you place this order. </p><ul><li>If the market is <strong>above</strong> trigger price, market order will execute when the market goes <strong>below</strong> trigger price.</li><li>If the market is <strong>below</strong> trigger price, market order will execute when the market goes <strong>above</strong> trigger price.</li><li>If the market is <strong>equals</strong> trigger price, market order will executed <strong>immediately</strong>.</li></ul><p>It does not matter which order action we are planning on taking. The chosen action will execute once the conditions are met.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">EnterMarket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_enterLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function maybe-class-name" style="color:#d73a49">PlaceStopMarketEntryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">High</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token maybe-class-name">TickSize</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_enterShort</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function maybe-class-name" style="color:#d73a49">PlaceStopMarketEntryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token maybe-class-name">Low</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token maybe-class-name">TickSize</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">PlaceStopMarketEntryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">bool isLong</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> double price</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _entryOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SubmitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderAction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Buy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">StopMarket</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PosSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">EnterLongName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _entryOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SubmitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderAction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">SellShort</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">StopMarket</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PosSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">EnterShortName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><p>In the example we see stop market sell executing a few ticks below the signal bar low. If there would have been a gap here the open price of the gap bar would have been used. However this is only because the market was above the trigger price when the order was placed.</p><img src="/twmdocs/assets/images/stopMarket1-5034d4724492541f470898ea6a76bc52.png" alt="Data Series Window" style="width:700px"><p>The below example however, illustrates a completely different approach where we have deliberately set a stop market sell order way higher than then current market. In this case, when the market did reach the trigger price, a market order was executed and filled at trigger price historically. In real market please expect appropriate slippage in such cases. Trigger price does not guarantee price, it guarantees execution of a merket order if the trigger price is reached.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_enterShort</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function maybe-class-name" style="color:#d73a49">PlaceStopMarketEntryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token maybe-class-name">High</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token maybe-class-name">TickSize</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><img src="/twmdocs/assets/images/stopMarket2-f34b8c898df4fcebd6bb73242547002c.png" alt="Data Series Window" style="width:600px"><p>On a historical market stop market orders behave differently when a position is already open. In this case they will act like a stop loss. If the position is open and a stop market order is placed main posints to consider are:</p><ul><li>These points are TRUE only for the historical execution</li><li>You cannot scale in using this type of order</li><li>The order can be used for exiting the position only</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="stop-limit-orders"></a>Stop-Limit Orders<a class="hash-link" href="#stop-limit-orders" title="Direct link to heading">#</a></h3><p>Stop limit order will place a limit order at limit price once the market has reached the trigger price. The limit order itself will work exactly as a standard limit order. Historical execution of stop limit orders is not currently supported. You can use stop limit orders only for live execution and placement on the exchange.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">PlaceStopLimitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">bool isLong</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> double price</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> double triggerPrice</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _entryOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SubmitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderAction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Buy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">StopLimit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PosSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> triggerPrice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">EnterLongName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isLong</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _entryOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SubmitOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderAction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">SellShort</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">OrderType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">StopLimit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PosSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> triggerPrice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">EnterShortName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/twmdocs/docs/code/indicators"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Indicators</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/twmdocs/docs/code/misc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Miscellaneous Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_KhxC thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#initialization" class="table-of-contents__link">Initialization</a></li><li><a href="#orders" class="table-of-contents__link">Orders</a></li><li><a href="#market-orders" class="table-of-contents__link">Market Orders</a></li><li><a href="#limit-orders" class="table-of-contents__link">Limit Orders</a></li><li><a href="#stop-market-orders" class="table-of-contents__link">Stop-Market Orders</a></li><li><a href="#stop-limit-orders" class="table-of-contents__link">Stop-Limit Orders</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 TWM</div></div></div></footer></div>
<script src="/twmdocs/assets/js/runtime~main.1b3b928b.js"></script>
<script src="/twmdocs/assets/js/main.f35465c1.js"></script>
</body>
</html>