<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/twmdocs/blog/rss.xml" title="TWM Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/twmdocs/blog/atom.xml" title="TWM Blog Atom Feed"><title data-react-helmet="true">Core | TWM</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://yzninjacoding.github.io/twmdocs/docs/code/core"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Core | TWM"><meta data-react-helmet="true" name="description" content="Custom Project"><meta data-react-helmet="true" property="og:description" content="Custom Project"><link data-react-helmet="true" rel="shortcut icon" href="/twmdocs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://yzninjacoding.github.io/twmdocs/docs/code/core"><link data-react-helmet="true" rel="alternate" href="https://yzninjacoding.github.io/twmdocs/docs/code/core" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yzninjacoding.github.io/twmdocs/docs/code/core" hreflang="x-default"><link rel="stylesheet" href="/twmdocs/assets/css/styles.87fddfc6.css">
<link rel="preload" href="/twmdocs/assets/js/runtime~main.bfce9597.js" as="script">
<link rel="preload" href="/twmdocs/assets/js/main.f35465c1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_ARwE">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/twmdocs/"><img src="/twmdocs/img/logo.svg" alt="TWM Logo" class="themedImage_BKHl themedImage--light_k5J3 navbar__logo"><img src="/twmdocs/img/logo.svg" alt="TWM Logo" class="themedImage_BKHl themedImage--dark_yA+l navbar__logo"><b class="navbar__title">TWM</b></a><a class="navbar__item navbar__link navbar__link--active" href="/twmdocs/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://twm.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Download<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_6ILz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_7-MD react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_cA0-">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_cA0-">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_xm8d"><button class="clean-btn backToTopButton_pefn" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_qc+d"><div class="sidebar_j5EG"><nav class="menu thin-scrollbar menu_5h4S menuWithAnnouncementBar_4sxA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/twmdocs/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Platform</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Code</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/twmdocs/docs/code/core">Core</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/twmdocs/docs/code/indicators">Indicators</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/twmdocs/docs/code/strategies">Strategies</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/twmdocs/docs/code/misc">Miscellaneous</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_eoSP"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_e3oB"><div class="docItemContainer_6UNJ"><article><div class="tocCollapsible_MxYT theme-doc-toc-mobile tocMobile_lj85"><button type="button" class="clean-btn tocCollapsibleButton_Pq3d">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Core</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="custom-project"></a>Custom Project<a class="hash-link" href="#custom-project" title="Direct link to heading">#</a></h3><p>TWM allows users to write their own extendable modules using C# language. In this section you will find tutorials and help on main API. TWN is installed together with a <code>Custom</code> project file where user is capabale of writing code. You can use any IDE of your choice. In our documentation we will be demonstrating everyhting with the help of Visual Studio Community Edition wich is a free IDE that can be downloaded from <a href="https://visualstudio.microsoft.com/downloads/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Your intial installation will place the TWMCustom project here <code>C:\Users\User\Documents\Twm\bin\Custom</code>. In order to start working with the custom project locate this folder and open the project or solution file <code>Twm.Custom.csproj</code> or <code>Twm.Custom.sln</code></p><p>You can compile the custom project from within the IDE or by running any compilation commands from within TWM. You can learn more about compiling and debuging <a href="/twmdocs/docs/platform/compilation">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="debuging"></a>Debuging<a class="hash-link" href="#debuging" title="Direct link to heading">#</a></h3><p>In order to Debug your project using an external IDE please read this <a href="/twmdocs/docs/platform/compilation#debuging">section</a> You may alternatively debug using the Debug window of TWM found in Admin panel <code>New -&gt; Debug</code>. Use the below command to print to Debug window.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B"><pre tabindex="0" class="prism-code language-undefined codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token plain">Print(&quot;Debug your code using this command&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="parameters"></a>Parameters<a class="hash-link" href="#parameters" title="Direct link to heading">#</a></h3><p>All parameters should be prefixed with a <code>[TwmProperty]</code> tag. In case if this is an Indicator parameter it will allow it to be passed to TWM code auto generator upon compilation and become accessable inside the strategy code. In the case with the Strategy it will allow this parameter to become available inside the <code>Optimizer</code>. </p><p>The parameter defaults should be assigned inside the OnStateChanged event</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">TwmProperty</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token function maybe-class-name" style="color:#d73a49">Display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Period&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">GroupName</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Parameters</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Order</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> int </span><span class="token maybe-class-name">Period</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> get</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> set</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><p>In order to be able to control category order <code>[Category(&quot;Category Name&quot;)]</code> tag has to be used. Native categories such as Setup and DataSeries can also be ordered. The category order has to be set above the class name.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token function maybe-class-name" style="color:#d73a49">CategoryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Setup</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token function maybe-class-name" style="color:#d73a49">CategoryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">DataSeries</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token function maybe-class-name" style="color:#d73a49">CategoryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">GlobalSettings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token function maybe-class-name" style="color:#d73a49">CategoryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">EntrySettings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token function maybe-class-name" style="color:#d73a49">CategoryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token function maybe-class-name" style="color:#d73a49">CategoryOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">ExitSettings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">DefaultMACrossOver</span><span class="token operator" style="color:#393A34">:</span><span class="token maybe-class-name">Strategy</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="execution"></a>Execution<a class="hash-link" href="#execution" title="Direct link to heading">#</a></h3><p>Whenever a strategy or indicator changes state the <code>OnStateChanged</code> event takes place. We are able to get the current new state of the object and work with it. Some global parameters such as Name and Version should be set here.</p><ul><li><strong>SetDefaults</strong> - mainly called whenever a user is working with the overall UI such as indicators or strategies dialog box where we see all indicators and strategies. This state should be used to set the defaults that we see when we enable such.</li><li><strong>Configured</strong> - this is a one time call when user enables the strategy/indicator. Called when user clicks enable or apply.</li></ul><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> override </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">OnStateChanged</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">State</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token maybe-class-name">State</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">SetDefaults</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Indicator Name&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Version</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1.0&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">State</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token maybe-class-name">State</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Configured</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><p>All historical and live execution of TWM strategies and indicators occurs <code>OnBarClose</code>. Please use the demonstrated method below to create your code logic inside these overrides.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> override </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">OnBarUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//write your business logic here</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><p>During <strong>live</strong> execution of TWM strategies and indicators you can also use <code>OnTickUpdate</code> to execute your business on a tick by tick basis. You can address the live candle values appropriatly.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> override </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">OnTickUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter maybe-class-name">ICandle</span><span class="token parameter"> candle</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">ICandle</span><span class="token parameter"> tick</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> close </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> candle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">C</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> high </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> candle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">H</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> low </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> candle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">L</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> open </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> candle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">O</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> candle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">t</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function maybe-class-name" style="color:#d73a49">Print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;LIVE CANDLE. Close: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> close </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; High:  &quot;</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">+</span><span class="token plain">high </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot; Low: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> low </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Open: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> open </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; Time: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><p><code>OnOrderUpdate</code> event will occur every time there is any change inside the strategy order. Use this to control your orders during historical strategy execution.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> override </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">OnOrderUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter maybe-class-name">Order</span><span class="token parameter"> order</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function maybe-class-name" style="color:#d73a49">Print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;On order update: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> order</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token string" style="color:#e3116c">&quot; Qnt: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> order</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Quantity</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token string" style="color:#e3116c">&quot; Price: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> order</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">FillPrice</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token string" style="color:#e3116c">&quot; Guid: &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> order</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Guid</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token string" style="color:#e3116c">&quot; State: &quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> order</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">OrderState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">State</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token maybe-class-name">State</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Historical</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function maybe-class-name" style="color:#d73a49">ManageOrders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><p><code>OnExecutionUpdate</code> will occur only when something occurs to the order during <code>live</code> exectuion ie. on the connection provider side. The OnExecutionUpdate event executes when we get a callback from the exchange only, it will not execute during historical strategy execution. Please make sure you use OnOrderUpdate during historical execution.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> override </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">OnExecutionUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter maybe-class-name">Order</span><span class="token parameter"> order</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">State</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token maybe-class-name">State</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">RealTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function maybe-class-name" style="color:#d73a49">ManageOrders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="adding-data-series"></a>Adding Data Series<a class="hash-link" href="#adding-data-series" title="Direct link to heading">#</a></h3><p>It is possible to add an additional data series to indicator or strategy and work with that series. SymbolName string is optional, if nothing is passed the data series will be enabled on the same instrument.</p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token function maybe-class-name" style="color:#d73a49">AddDataSeries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">DataSeriesType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Hour</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SymbolName&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="comissions"></a>Comissions<a class="hash-link" href="#comissions" title="Direct link to heading">#</a></h3><p>Comissions is an extendable TWM module. There are several pre-configured set ups available. The comissions are calculated at the end of each trade and we have a chance to interact with the trade data in order to make extra calculations. The returned comissions value will be deducted from the total pnl of the trade. Below is an example of most popular % based comission calculation. </p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> override double </span><span class="token function maybe-class-name" style="color:#d73a49">GetCommission</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter maybe-class-name">Trade</span><span class="token parameter"> trade</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> entry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">trade</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ExitQuantity</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> trade</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">EntryPrice</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">*</span><span class="token maybe-class-name">Commission</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> exit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">trade</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ExitQuantity</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> trade</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ExitPrice</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">*</span><span class="token maybe-class-name">Commission</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> entry </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> exit</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div><p>TWM is already preset with spot and futures comissions presets for taker and maker options.</p><img src="/twmdocs/assets/images/comissions-d584cd02c80afb48af448496a6f7ced3.png" alt="comissions" style="width:700px"><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1NVJ" id="optimization-fitness"></a>Optimization Fitness<a class="hash-link" href="#optimization-fitness" title="Direct link to heading">#</a></h3><p>You can access and code your own optimization fitness coefficient. Please look for examples in the optimization fitness folder. The optimzer will always try and find the max <code>Value</code> parameter that you pass from here. </p><div class="codeBlockContainer_sDS1"><div class="codeBlockContent_xM7B js"><pre tabindex="0" class="prism-code language-js codeBlock_3zgy thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_NOXM"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MaxProfitFactor</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">OptimizationFitness</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> string </span><span class="token maybe-class-name">OptimizationFitnessName</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Max Profit Factor&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> override </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">OnCalculatePerformanceValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter maybe-class-name">StrategyBase</span><span class="token parameter"> strategy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Value</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">SystemPerformance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Summary</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">AnalyticalFeature</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ProfitFactor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_v1zf clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/twmdocs/docs/platform/accounts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Accounts</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/twmdocs/docs/code/indicators"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Indicators Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_KhxC thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#custom-project" class="table-of-contents__link">Custom Project</a></li><li><a href="#debuging" class="table-of-contents__link">Debuging</a></li><li><a href="#parameters" class="table-of-contents__link">Parameters</a></li><li><a href="#execution" class="table-of-contents__link">Execution</a></li><li><a href="#adding-data-series" class="table-of-contents__link">Adding Data Series</a></li><li><a href="#comissions" class="table-of-contents__link">Comissions</a></li><li><a href="#optimization-fitness" class="table-of-contents__link">Optimization Fitness</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 TWM</div></div></div></footer></div>
<script src="/twmdocs/assets/js/runtime~main.bfce9597.js"></script>
<script src="/twmdocs/assets/js/main.f35465c1.js"></script>
</body>
</html>