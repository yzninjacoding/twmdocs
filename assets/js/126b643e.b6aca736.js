"use strict";(self.webpackChunktwmdocs=self.webpackChunktwmdocs||[]).push([[9508],{9897:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>g});var a=t(4805);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(t),m=r,g=p["".concat(l,".").concat(m)]||p[m]||u[m]||i;return t?a.createElement(g,o(o({ref:n},c),{},{components:t})):a.createElement(g,o({ref:n},c))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8278:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var a=t(423),r=(t(4805),t(9897));const i=t.p+"assets/images/SmaMinMax-8afe6cfc0ba415579413ca99e25a1814.png",o={sidebar_position:2},s="Indicators",l={unversionedId:"code/indicators",id:"code/indicators",isDocsHomePage:!1,title:"Indicators",description:"TWM comes preset with over 30 default indicators. Each indicator source code is open for review within the Custom project. Below you can find overall description of Indicator API.",source:"@site/docs/code/indicators.md",sourceDirName:"code",slug:"/code/indicators",permalink:"/twmdocs/docs/code/indicators",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Core",permalink:"/twmdocs/docs/code/core"},next:{title:"Strategies",permalink:"/twmdocs/docs/code/strategies"}},d=[{value:"Input",id:"input",children:[]},{value:"Initialization from Strategy",id:"initialization-from-strategy",children:[]},{value:"Pane &amp; Plot &amp; Series",id:"pane--plot--series",children:[]},{value:"Complex Calculations",id:"complex-calculations",children:[]}],c={toc:d},p="wrapper";function u(e){let{components:n,...t}=e;return(0,r.yg)(p,(0,a.A)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"indicators"},"Indicators"),(0,r.yg)("p",null,"TWM comes preset with over 30 default indicators. Each indicator source code is open for review within the Custom project. Below you can find overall description of Indicator API."),(0,r.yg)("h3",{id:"input"},"Input"),(0,r.yg)("p",null,"In the below example we can see that the Input","[0]"," is used. This indicates that anyhting that the user assigns as the input will be passed into this series. This is true for UI as well as for bringing input from other indicators and/or strategies. By default the Close prices are passed, however this can be adjusted if the indicator is designed to do so."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"public override void OnBarUpdate()\n{\n    _priorSum = _sum;\n\n    _sum = _priorSum + Input[0] - (CurrentBar-1 >= Period ? Input[Period] : 0);\n    MA[0] = _sum / (CurrentBar-1 < Period ? CurrentBar : Period);\n\n\n}\n")),(0,r.yg)("p",null,"Below we can see the EMA indicator gets initialized with a High and Low series passed as input. If we do not pass anything as the first parameter, the Close series will be passed by default under the hood."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"private Indicator _maFast;\nprivate Indicator _maSlow;\n\nprivate void AddIndicators()\n{\n    _maFast = EMA(High, PeriodFast);\n    _maSlow = EMA(Low, PeriodSlow);\n}\n\n")),(0,r.yg)("h3",{id:"initialization-from-strategy"},"Initialization from Strategy"),(0,r.yg)("p",null,"The indicator will be plotted on chart by default if it is initialized without ScriptOptions parameter passed. User has an option to hide the indicator from chart or hide the indicator panel from chart by assigning appropriate ",(0,r.yg)("inlineCode",{parentName:"p"},"ShowPlots")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"ShowPanes")," booleans in the ScriptOptions object."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"private Indicator _maFast;\nprivate void AddIndicators()\n{\n    var options = new ScriptOptions { ShowPlots = true, ShowPanes = false};\n    _maFast = EMA(High, PeriodFast, options);\n}\n\n")),(0,r.yg)("h3",{id:"pane--plot--series"},"Pane & Plot & Series"),(0,r.yg)("p",null,"The indicator has to be created in  a certain order. "),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Create Plot"),(0,r.yg)("li",{parentName:"ol"},"Create a custom pane if required and add plot to pane or to price pane"),(0,r.yg)("li",{parentName:"ol"},"Create Series"),(0,r.yg)("li",{parentName:"ol"},"Assign series data to the created plot")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"[Browsable(false)]\n[XmlIgnore]\npublic Series<double> MA { get; set; }\n\nprivate Plot _plot;\n\npublic override void OnStateChanged()\n{\n    if (State == State.SetDefaults)\n    {\n        MAThickness = 1;\n        MAColor = Colors.Green;\n        Period = 14;\n\n        //1 - create plot\n        _plot = new Plot(){Thickness = MAThickness, Color = MAColor}; \n\n        //2 - adding plot to existing price pane does not require extra pane creation, just add.\n        AddPanePlot(_plot); \n\n        //alternatively you can add as many panes as you want and add plots to them\n        //you can have multiple panes within one indicator instance\n        var secondPane = AddPane();\n        AddPanePlot(secondPane, _plot);\n    }\n    else if (State == State.Configured)\n    {\n        //3 - create an empty series and use AddSeries to enable it\n        MA = new Series<double>();\n        AddSeries(MA);\n\n        //4 - asign series data to plot data source\n        _plot.DataSource = MA;\n    }\n}\n")),(0,r.yg)("h4",{id:"plot-parameters"},"Plot Parameters"),(0,r.yg)("p",null,"The plot can have some parameters that are possible to be assigned."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'{\n    Name = "This name will come up in the data box";\n    Color = Colors.Blue;\n    LineType = PlotLineType.Solid; //can also set Dashed\n    Thickness = 2;\n    ChartType = PlotChartType.Linear; //can also set Bars for histrogram style\n}\n')),(0,r.yg)("p",null,"If you plan to interact with plot colors inside the script, for instance by conditionally updating their color you need to make some extra settings and pass the PlotColors context."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"public override void OnStateChanged()\n{\n    if (State == State.SetDefaults)\n    {\n        _plot_.PlotColors = new ColorMap(DataCalcContext); \n    }\n}\n\npublic override void OnBarUpdate()\n{\n    if (Diff[0] > 0)\n    {\n        _diff.PlotColors[0] = Brushes.Green;\n    }\n    if (Diff[0] < 0)\n    {\n        _diff.PlotColors[0] = Brushes.Red;\n    }\n    \n}\n\n")),(0,r.yg)("h2",{id:"complex-calculations"},"Complex Calculations"),(0,r.yg)("p",null,"You can also make your calculations within the script and pass the calculated values into another indicator. This is quite common for averaging purposes. For instance calculating something inside the OnBarUpdate and passing the calculated series into an SMA."),(0,r.yg)("p",null,"Below is an illustrated example with SMA indicator initialized on the main price pane and two extra indicators engaged on an extra pane. The additional indicators are MIN and MAX indicators using the calculated SMA value from within a single instance of the same indicator."),(0,r.yg)("img",{src:i,alt:"Data Series Window",style:{width:700}}),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"[Browsable(false)]\n[XmlIgnore]\npublic Series<double> MA { get; set; }\n\n[Browsable(false)]\n[XmlIgnore]\npublic Series<double> MAMin { get; set; }\n\n[Browsable(false)]\n[XmlIgnore]\npublic Series<double> MAMax { get; set; }\n\nprivate Plot _plot;\nprivate Plot _plotMaMin;\nprivate Plot _plotMaMax;\n//additional indicators to be used with calculations\nprivate Indicator _maMax;\nprivate Indicator _maMin;\n\npublic override void OnStateChanged()\n{\n    if (State == State.SetDefaults)\n    {\n        Name = IndicatorName;\n        Version = IndicatorVersion;\n\n        var MAThickness = 1;\n        var MAColor = Colors.Green;\n        Period = 14;\n\n        _plot = new Plot(){Thickness = MAThickness, Color = MAColor};\n        AddPanePlot(_plot);\n\n        //creating two extra plots for MIN and MAX\n        _plotMaMin = new Plot(){Thickness = MAThickness, Color = Colors.Blue};\n        _plotMaMax = new Plot(){Thickness = MAThickness, Color = Colors.Orange};\n\n        //adding both to same new pane\n        var maMixMinPane = AddPane();\n        AddPanePlot(maMixMinPane, _plotMaMin);\n        AddPanePlot(maMixMinPane, _plotMaMax);\n    }\n    else if (State == State.Configured)\n    {\n        MA = new Series<double>();\n        AddSeries(MA);\n        _plot.DataSource = MA;\n\n        MAMin = new Series<double>();\n        AddSeries(MAMin);\n        _plotMaMin.DataSource = MAMin;\n\n        MAMax = new Series<double>();\n        AddSeries(MAMax);\n        _plotMaMax.DataSource = MAMax;\n\n        //assigning MA series as the input of the indicators\n        _maMax = Max(MA,Period);\n        _maMin = Min(MA, Period);\n    }\n}\n\npublic override void OnBarUpdate()\n{\n    _priorSum = _sum;\n\n    _sum = _priorSum + Input[0] - (CurrentBar-1 >= Period ? Input[Period] : 0);\n    MA[0] = _sum / (CurrentBar-1 < Period ? CurrentBar : Period);\n\n    //getting the values\n    MAMax[0] = _maMax[0];\n    MAMin[0] = _maMin[0];\n}\n")),(0,r.yg)("p",null,"Although the exact same output can be achieved using the next example, it is ",(0,r.yg)("strong",{parentName:"p"},"highly unrecommended")," to use do this because this boosts up CPU usage significantly especially of complex calculations."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"public override void OnBarUpdate()\n{\n    _priorSum = _sum;\n\n    _sum = _priorSum + Input[0] - (CurrentBar-1 >= Period ? Input[Period] : 0);\n    MA[0] = _sum / (CurrentBar-1 < Period ? CurrentBar : Period);\n\n    //NOT RECOMENDED!!!\n    MAMax[0] = Max(MA,Period)[0];\n    MAMin[0] = Min(MA, Period)[0];\n\n}\n")))}u.isMDXComponent=!0}}]);